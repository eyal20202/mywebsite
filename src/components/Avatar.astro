---
export interface Props {
  size?: 'sm' | 'md' | 'lg' | 'xl';
  animated?: boolean;
}

const { size = 'lg', animated = true } = Astro.props;

const sizeClasses = {
  sm: 'w-16 h-16',
  md: 'w-24 h-24',
  lg: 'w-32 h-32',
  xl: 'w-48 h-48'
};
---

<div class={`relative ${sizeClasses[size]} group`}>
  <!-- Main Avatar -->
  <div class={`relative w-full h-full rounded-full bg-gradient-to-br from-primary-400 to-primary-600 dark:from-primary-500 dark:to-primary-700 overflow-hidden shadow-lg transition-all duration-300 ${animated ? 'hover:scale-105 hover:shadow-xl' : ''}`}>
    <!-- Avatar Face -->
    <div class="absolute inset-0 flex items-center justify-center">
      <div class="text-white text-4xl font-bold select-none">
        üë®‚Äçüíª
      </div>
    </div>
    
    <!-- Animated Elements -->
    {animated && (
      <>
        <!-- Floating particles -->
        <div class="absolute inset-0 overflow-hidden">
          <div class="particle particle-1"></div>
          <div class="particle particle-2"></div>
          <div class="particle particle-3"></div>
        </div>
        
        <!-- Glow effect -->
        <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 animate-pulse"></div>
      </>
    )}
  </div>
  
  <!-- Status indicator -->
  <div class="absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 border-4 border-white dark:border-dark-900 rounded-full animate-pulse"></div>
  
  <!-- Tooltip -->
  <div class="absolute -top-12 left-1/2 transform -translate-x-1/2 bg-dark-800 text-white text-sm px-3 py-1 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none whitespace-nowrap">
    Available for hire! üöÄ
    <div class="absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-dark-800"></div>
  </div>
</div>

<style>
  .particle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: rgba(255, 255, 255, 0.6);
    border-radius: 50%;
    animation: float 3s ease-in-out infinite;
  }
  
  .particle-1 {
    top: 20%;
    left: 20%;
    animation-delay: 0s;
  }
  
  .particle-2 {
    top: 60%;
    right: 20%;
    animation-delay: 1s;
  }
  
  .particle-3 {
    bottom: 20%;
    left: 50%;
    animation-delay: 2s;
  }
  
  @keyframes float {
    0%, 100% {
      transform: translateY(0px) scale(1);
      opacity: 0.6;
    }
    50% {
      transform: translateY(-10px) scale(1.2);
      opacity: 1;
    }
  }
  
  /* Responsive adjustments */
  @media (max-width: 640px) {
    .particle {
      display: none;
    }
  }
</style>

<script>
  // Add interactive click effects
  const avatar = document.querySelector('.group');
  
  avatar?.addEventListener('click', () => {
    // Add a ripple effect
    const ripple = document.createElement('div');
    ripple.className = 'absolute inset-0 bg-white/20 rounded-full animate-ping';
    avatar.appendChild(ripple);
    
    setTimeout(() => {
      ripple.remove();
    }, 1000);
    
    // Trigger a fun animation
    avatar.style.transform = 'scale(0.95) rotate(5deg)';
    setTimeout(() => {
      avatar.style.transform = 'scale(1) rotate(0deg)';
    }, 150);
  });
</script>
